---
/**
 * Groups Index Page
 *
 * Displays all ministry groups with header images and leader avatars.
 */

import Base from '../../layouts/Base.astro';
import PageHero from '../../components/shared/PageHero.astro';
import GroupCard from '../../components/shared/GroupCard.astro';

// Load groups data
let groups = [];
try {
  const groupsData = await import('../../data/groups.json');
  // Filter to only show ministry groups (exclude administrative groups)
  const excludedGroups = ['all-church-events', 'leadership', 'maintenance'];
  groups = (groupsData.groups || []).filter(g => !excludedGroups.includes(g.slug));
} catch (e) {
  console.log('Groups data not yet generated');
}
---

<Base title="Groups" description="Connect with others at River of Life through our various ministry groups for all ages and interests.">
  <PageHero title="Groups" image="/hero/5.jpg" />

  <section class="groups-content">
    <div class="groups-container">
      <div class="intro">
        <h2>Find Your Community</h2>
        <p>At River of Life, we believe that real growth happens in community. Our groups provide opportunities to connect with others, grow in your faith, and serve together.</p>
      </div>

      {groups.length === 0 && (
        <p class="no-groups">Groups information coming soon.</p>
      )}

      <div class="groups-grid">
        {groups.map((group) => (
          <GroupCard group={group} />
        ))}
      </div>
    </div>
  </section>
</Base>

<style>
  .groups-content {
    padding: 4rem 2rem;
  }

  .groups-container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .intro {
    text-align: center;
    margin-bottom: 3rem;
  }

  .intro h2 {
    color: var(--color-navy);
    font-size: 2rem;
    margin-bottom: 1rem;
  }

  .intro p {
    color: var(--color-text-light);
    font-size: 1.1rem;
    line-height: 1.8;
    max-width: 700px;
    margin: 0 auto;
  }

  .no-groups {
    text-align: center;
    color: var(--color-text-light);
    font-size: 1.1rem;
    padding: 2rem;
  }

  .groups-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 2rem;
  }

  @media (max-width: 768px) {
    .groups-content {
      padding: 2rem 1rem;
    }

    .intro {
      margin-bottom: 2rem;
    }

    .intro h2 {
      font-size: 1.5rem;
    }

    .intro p {
      font-size: 1rem;
    }

    .groups-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
