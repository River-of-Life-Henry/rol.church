# River of Life Church Website - AI Context

This is the official website for **River of Life Church**, an Apostolic Pentecostal church in Henry, IL.

**Live URL:** https://rol.church

## Technology Stack

- **Framework:** Astro 5.x (static site generator)
- **Styling:** CSS-in-JS with scoped and global styles
- **Data Sync:** Ruby scripts pulling from Planning Center API
- **Deployment:** GitHub Pages via GitHub Actions
- **Analytics:** Google Analytics 4, Microsoft Clarity, Meta Pixel

## Project Structure

```
src/
├── components/
│   ├── HeroSlider.astro    # Home page animated image carousel (Ken Burns effect)
│   └── PageHero.astro      # Hero banner for sub-pages
├── layouts/
│   └── Base.astro          # MAIN LAYOUT - header, nav, footer, analytics (~1000 lines)
├── pages/                  # URL routes (file-based routing)
│   ├── index.astro         # Home page
│   ├── events.astro        # Events listing (6 weeks ahead)
│   ├── pastor.astro        # Pastor page (hardcoded)
│   ├── groups/
│   │   ├── index.astro     # Groups overview
│   │   └── [slug].astro    # Dynamic group pages
│   └── ...                 # Other pages
└── data/                   # JSON data (auto-generated by Ruby scripts)
    ├── events.json         # From Planning Center Calendar
    ├── groups.json         # From Planning Center Groups
    ├── youtube.json        # Latest YouTube video
    └── hero_images.json    # From Planning Center Media

scripts/
├── sync_all.rb             # Run all sync scripts
├── sync_events.rb          # Sync events from PC Calendar
├── sync_groups.rb          # Sync groups with leaders
├── sync_hero_images.rb     # Sync hero slider images
├── sync_youtube.rb         # Sync latest YouTube video
└── pco_client.rb           # Planning Center API client

public/
├── hero/                   # Hero slider images
├── groups/                 # Group headers and leader photos
├── team/                   # Pastor photo (kept for pastor page)
└── logo.png, favicon.png   # Brand assets
```

## Key Files

### `src/layouts/Base.astro` (Most Important)
Contains:
- HTML head with meta tags, SEO, structured data (JSON-LD)
- Google Analytics, Clarity, Meta Pixel scripts
- Header with navigation (responsive with hamburger menu)
- Footer with service times, location, contact, social links
- All global CSS styles including:
  - CSS variables (colors, fonts)
  - Navigation styles (desktop + mobile)
  - Footer styles
  - Button/link styles

### `src/pages/events.astro`
- Displays events from `events.json`
- Groups events by month
- Limited to 6 weeks ahead
- All times displayed in Chicago timezone (`America/Chicago`)

### `src/pages/pastor.astro`
- Static page showing pastor info (hardcoded, not synced)
- Previously was `/team` with multiple team members

### `src/pages/groups/[slug].astro`
- Dynamic pages for each ministry group
- Shows group description, upcoming events, leaders
- Events filtered by group name/tags

## Design System

### Colors (CSS Variables)
- `--color-teal: #2d9cca` - Primary accent
- `--color-teal-dark: #1a7ba8` - Hover states
- `--color-gold: #f5c542` - Highlights, tagline
- `--color-navy: #1a3a4a` - Text, headers, footer background
- `--color-navy-light: #2a4a5a` - Secondary navy

### Fonts
- **Montserrat** (`--font-sans`) - Body text, headings
- **Dancing Script** (`--font-script`) - Decorative tagline "Where life begins"

### Breakpoints
- Mobile menu: `900px`
- Stack layouts: `768px`

## Common Tasks

### Add/Edit a Page
1. Create/edit `.astro` file in `src/pages/`
2. Import Base layout: `import Base from '../layouts/Base.astro';`
3. Wrap content: `<Base title="Page Title">content</Base>`
4. Add navigation link in `Base.astro` if needed

### Update Navigation
Edit `src/layouts/Base.astro` around line 170-198:
- Main nav items in `.nav-menu`
- Dropdown menus in `.has-dropdown > .dropdown`

### Update Footer
Edit `src/layouts/Base.astro` around line 430-488:
- Service times, location, contact info, social links

### Change Styles
- Global styles: `<style is:global>` in `Base.astro`
- Page-specific: `<style>` in individual page files
- Component-specific: `<style>` in component files

### Sync Data from Planning Center
```bash
cd scripts
ruby sync_all.rb  # Or individual scripts
```
Requires environment variables:
- `ROL_PLANNING_CENTER_CLIENT_ID`
- `ROL_PLANNING_CENTER_SECRET`

## Important Conventions

1. **Timezone:** All event times use Chicago timezone (`America/Chicago`)
   - Ruby scripts: `ENV['TZ'] = 'America/Chicago'` at top
   - Frontend: `timeZone: 'America/Chicago'` in toLocaleTimeString

2. **SEO:** Each page should have:
   - Descriptive title via `<Base title="...">`
   - Description via `<Base description="...">`

3. **Analytics:** All user interactions should be tracked to GA4, Microsoft Clarity, and Meta Pixel
   - Use the `trackEvent()` function in Base.astro for custom events
   - CTAs, form opens, navigation clicks, scroll depth, and time on page are auto-tracked
   - When adding new interactive elements, ensure they are tracked

4. **Images:**
   - Hero images: `/public/hero/`
   - Group images: `/public/groups/`
   - Pastor photo: `/public/team/andrew_coffield.jpg`

5. **Data Files:** Never edit files in `src/data/` manually - they're auto-generated by sync scripts

6. **Documentation:** Always keep README.md up to date when making changes to the site
   - Document new features
   - Update instructions if workflows change
   - Keep Planning Center sync instructions current

7. **SEO & AI Optimization:** Every site update should consider SEO and AI discoverability
   - Use semantic HTML (proper H1, H2, H3 hierarchy)
   - Include "River of Life" and "Apostolic Pentecostal church" in key pages
   - Write descriptive meta descriptions
   - Use alt text for images
   - Maintain structured data (JSON-LD) in Base.astro
   - Home page has a visually-hidden H1 with full church name for SEO
   - Use `.sr-only` class for SEO-important but visually hidden content

8. **Address Linking:** Every time the church address (425 University Ave, Henry, IL) appears on the site, it MUST link to the `/directions` page

9. **Button Icons:** All buttons (`.btn`, `.btn-large`) should have SVG icons for visual appeal

## Church Identity

- **Name:** River of Life (ROL)
- **Denomination:** Apostolic Pentecostal
- **Location:** 425 University Ave, Henry, IL 61537
- **Tagline:** "Where life begins"
- **Pastor:** Andrew & Chelsea Coffield
- **Service Times:**
  - Sunday: 10am (Christian Education), 11am (Main Service)
  - Wednesday: 7pm (Bible Study)

## SEO Keywords
Include naturally in content:
- River of Life, ROL Henry
- Apostolic Pentecostal church
- Henry IL church
- Pentecostal church near me
